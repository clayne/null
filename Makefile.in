#
# $Id$
#

PROG	= null
OBJS	= argv.o compat.o md5.o

PORTFLS	= ChangeLog Makefile.all.in README argv.[ch] argv_loc.h compat.[ch] \
	conf.h.in configure configure.in install-sh md5.[ch] md5_loc.h \
	mkinstalldirs null.c

DEFS	= -DHAVE_STDLIB_H=@HAVE_STDLIB_H@ \
	-DHAVE_STRING_H=@HAVE_STRING_H@ \
	-DHAVE_UNISTD_H=@HAVE_UNISTD_H@ \
	$(DEFINES)
INCS	= -I. $(INCLUDES)
LIBS	= $(LIBRARIES)

CFLAGS	= -O2 $(CCFLAGS)
DESTDIR	= /usr/local/bin

all :: $(PROG)

clean ::
	$(CLEAN)
	rm -f $(PROG)

distclean : clean
	rm -f confdefs.h config.status config.log config.cache conf.h
	rm -f Makefile configure

install :: $(PROG)
	install -cesv $(PROG) $(DESTDIR)

$(PROG) : $(PROG).o $(OBJS)
	rm -f $@
	$(CC) $(LDFLAGS) $(PROG).o $(OBJS) $(LIBS)
	mv a.out $@

port :: $(PORTFLS)
	@ answer 'Is it okay to remove the $@ directory? '
	rm -rf $@
	mkdir $@
	cp $(PORTFLS) $@
	mv $@/Makefile.all.in $@/Makefile.in
	@ echo ''
	@ echo 'Please rename $@ and tar up file'

.include <local.mk>
